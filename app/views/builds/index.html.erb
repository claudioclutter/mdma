<table class="table table-sm">
  <thead>
    <tr>
      <th>ID</th>
      <th>Deploy</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @builds.each do |build| %>
      <tr class="table-default">
        <td><%= build.id %></td>
        <td>
          on <%= l build.deploy_at.in_time_zone, format: :verbose %>
        </td>
        <td><%= link_to "Download", rails_blob_url(build.package, disposition: "attachment") %></td>
        <!-- <td>Cancel</td>add icons -->
      </tr>
      <% build.deploys.each do |deploy| %>
        <tr class="<%=
          if deploy.enqueued?
            'table-warning'
          elsif deploy.successful?
            'table-success'
          elsif deploy.failed?
            'table-danger'
          elsif deploy.scheduled?
            'table-active'
          elsif deploy.running?
            'table-primary'
          end
         %>">
          <td></td>
          <td>
            after <%= pluralize deploy.timeslot.delay_in_hours, 'hour' %>
            for <%= deploy.timeslot.prefixes.to_sentence.presence || 'all' %> devices
          </td>
          <td><%= deploy.status %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
